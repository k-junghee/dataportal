<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Portal</title>
    <link rel="stylesheet" href="../src/css/reset.css">
    <link rel="stylesheet" href="../src/css/common.css">
    <link rel="stylesheet" href="../src/css/typeA.css">
    <script src="../src/js/common.js" defer></script>
    <script src="../src/js/typeA.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script> <!-- sample data -->
    <script src="https://code.highcharts.com/highcharts-3d.js"></script> <!-- sample data -->
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script> <!-- sample data -->
    <script src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"></script> <!-- sample data -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts-wordcloud@2/dist/echarts-wordcloud.min.js"></script>
</head>
<body>
<!-- header -->
<div id="header"></div>
<script>
    setTimeout(() => {
        document.getElementById('population-link').classList.add('active'); /* 인구통계 active */
    }, 50);
</script>
<!-- //header -->
<section>
    <h1 class="blind">서울특별시 재정 현황</h1>
    <!-- type A -->
    <div class="type_a_wrap layout">
        <div class="type_a_gird">
            <div class="a_colum a_left ac2">
                <div class="type_list list_keyword">
                    <div class="title sb">
                        <p class="tit">우리동네 재정 현황</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp01">더보기</a>
                    </div>
                    <div class="data_area scroll">
                        <!-- sample data : table -->
                        <div class="db-table">
                            <div class="table-wrap">
                                <table style="width: 1000px">
                                <thead>
                                    <tr>
                                    <th>No</th>
                                    <th>부문별</th>
                                    <th>예산현액<br>(억원)</th>
                                    <th>편성액<br>(억원)</th>
                                    <th>지출액<br>(억원)</th>
                                    <th>잉여금<br>(억원)</th>
                                    <th>현예산<br>지급율%</th>
                                    <th>시군구비<br>(억원)</th>
                                    <th>국비<br>(억원)</th>
                                    <th>시도비<br>(억원)</th>
                                    <th>기타<br>(억원)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                    <td>1</td>
                                    <td>취약계층지원</td>
                                    <td>7693.59</td>
                                    <td>7596.15</td>
                                    <td>2769.01</td>
                                    <td>4924.58</td>
                                    <td>36.0%</td>
                                    <td>36.5</td>
                                    <td>1379.51</td>
                                    <td>4216.45</td>
                                    <td>2064.01</td>
                                    </tr>
                                    <tr>
                                    <td>2</td>
                                    <td>기타</td>
                                    <td>1860.26</td>
                                    <td>1859.10</td>
                                    <td>679.30</td>
                                    <td>1180.36</td>
                                    <td>36.5%</td>
                                    <td>36.2</td>
                                    <td>1784.51</td>
                                    <td>45.2</td>
                                    <td>70.41</td>
                                    </tr>
                                    <tr>
                                    <td>3</td>
                                    <td>일반행정</td>
                                    <td>866.41</td>
                                    <td>748.86</td>
                                    <td>181.44</td>
                                    <td>684.97</td>
                                    <td>20.9%</td>
                                    <td>24.2</td>
                                    <td>843.04</td>
                                    <td>6.36</td>
                                    <td>12.53</td>
                                    </tr>
                                    <tr>
                                    <td>4</td>
                                    <td>폐기물</td>
                                    <td>862.26</td>
                                    <td>571.87</td>
                                    <td>297.06</td>
                                    <td>565.20</td>
                                    <td>34.5%</td>
                                    <td>51.9</td>
                                    <td>639.90</td>
                                    <td>9.22</td>
                                    <td>130.67</td>
                                    </tr>
                                    <tr>
                                    <td>5</td>
                                    <td>체육</td>
                                    <td>527.42</td>
                                    <td>423.71</td>
                                    <td>107.91</td>
                                    <td>341.80</td>
                                    <td>25.5%</td>
                                    <td>41.9</td>
                                    <td>370.17</td>
                                    <td>67.69</td>
                                    <td>23.87</td>
                                    </tr>
                                    <tr>
                                    <td>6</td>
                                    <td>도로</td>
                                    <td>326.61</td>
                                    <td>256.98</td>
                                    <td>105.74</td>
                                    <td>220.87</td>
                                    <td>32.4%</td>
                                    <td>41.1</td>
                                    <td>283.29</td>
                                    <td>0.27</td>
                                    <td>2.84</td>
                                    </tr>
                                    <tr>
                                    <td>7</td>
                                    <td>보건의료</td>
                                    <td>293.66</td>
                                    <td>292.64</td>
                                    <td>108.67</td>
                                    <td>184.49</td>
                                    <td>37.1%</td>
                                    <td>37.1</td>
                                    <td>111.01</td>
                                    <td>66.44</td>
                                    <td>115.52</td>
                                    </tr>
                                    <tr>
                                    <td>8</td>
                                    <td>지역및도시</td>
                                    <td>183.68</td>
                                    <td>154.19</td>
                                    <td>34.42</td>
                                    <td>179.19</td>
                                    <td>18.7%</td>
                                    <td>33.3</td>
                                    <td>147.86</td>
                                    <td>1.45</td>
                                    <td>0.56</td>
                                    </tr>
                                    <tr>
                                    <td>9</td>
                                    <td>유아및초중고등교육</td>
                                    <td>161.79</td>
                                    <td>150.73</td>
                                    <td>56.39</td>
                                    <td>105.40</td>
                                    <td>34.9%</td>
                                    <td>37.4</td>
                                    <td>144.60</td>
                                    <td>1.87</td>
                                    <td>2.32</td>
                                    </tr>
                                    <tr>
                                    <td>10</td>
                                    <td>산업진흥, 고도화</td>
                                    <td>123.31</td>
                                    <td>118.57</td>
                                    <td>44.69</td>
                                    <td>78.62</td>
                                    <td>36.2%</td>
                                    <td>37.7</td>
                                    <td>87.12</td>
                                    <td>1.21</td>
                                    <td>14.99</td>
                                    </tr>
                                    <tr>
                                    <td>11</td>
                                    <td>에비비비</td>
                                    <td>65.94</td>
                                    <td>75.74</td>
                                    <td>0.00</td>
                                    <td>65.94</td>
                                    <td>0.0%</td>
                                    <td>0.0</td>
                                    <td>53.24</td>
                                    <td>9.7</td>
                                    <td>3.0</td>
                                    </tr>
                                    <tr>
                                    <td>12</td>
                                    <td>재난방재, 민방위</td>
                                    <td>35.04</td>
                                    <td>23.21</td>
                                    <td>5.07</td>
                                    <td>28.20</td>
                                    <td>21.9%</td>
                                    <td>0.5</td>
                                    <td>19.42</td>
                                    <td>5.31</td>
                                    <td>9.07</td>
                                    </tr>
                                    <tr>
                                    <td>13</td>
                                    <td>임업, 산촌</td>
                                    <td>29.89</td>
                                    <td>25.17</td>
                                    <td>7.56</td>
                                    <td>22.33</td>
                                    <td>25.3%</td>
                                    <td>3.0</td>
                                    <td>18.57</td>
                                    <td>7.01</td>
                                    <td>3.44</td>
                                    </tr>
                                </tbody>
                                </table>
                            </div>
                            </div>
                        <!-- //sample data : table -->
                    </div>
                </div>
                <div class="type_list list_board ac_2h">
                    <div class="title sb">
                        <p class="tit">주요 사용 현황</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp02">더보기</a>
                    </div>
                    <div class="data_area">
                        <!-- sample data : highcharts.js -->
                         <div class="data_inner_tw">
                            <div id="donut-container01" style="width: 45%; height: 200px;"></div>
                            <div style="width: 50%; font-family: Arial, sans-serif; color: #555;padding-left: 20px;">
                                <ul style="list-style:none; padding:0; margin:0; font-size:14px; line-height:1.8;display: flex;flex-direction: column; justify-content: center; height: 100%; gap: 10px;">
                                    <li><span style="color:#ff69b4;">20대</span> : 5,669건 (3.2%)</li>
                                    <li><span style="color:#ffcc00;">30대</span> : 79,766건 (36.1%)</li>
                                    <li><span style="color:#66ccff;">40대</span> : 86,897건 (33.3%)</li>
                                    <li><span style="color:#99ff99;">50대</span> : 48,346건 (18.6%)</li>
                                    <li><span style="color:#cc99ff;">60대</span> : 21,524건 (8.8%)</li>
                                </ul>
                                <!-- <div style="margin-top:10px; font-weight:bold; font-size:18px;">
                                전체 합계: 3,656건
                                </div> -->
                            </div>
                        </div>
                        <script>
                        Highcharts.chart('donut-container01', {
                        chart: {
                            type: 'pie',
                            backgroundColor: 'transparent',
                            options3d: {
                            enabled: true,
                            alpha: 45
                            }
                        },
                        // title: { text: '연령대별 거래 비율' },
                        title: null,
                        plotOptions: {
                            pie: {
                            innerSize: 50,
                            depth: 45,
                            dataLabels: {
                                enabled: true,
                                format: '{point.name}: {point.percentage:.1f}%'
                            }
                            }
                        },
                        series: [{
                            name: '비율',
                            data: [
                            { name: '20대', y: 5669, color: '#ff69b4' },
                            { name: '30대', y: 79766, color: '#ffcc00' },
                            { name: '40대', y: 86897, color: '#66ccff' },
                            { name: '50대', y: 48346, color: '#99ff99' },
                            { name: '60대', y: 21524, color: '#cc99ff' }
                            ]
                        }]
                        });
                        </script>
                        <!-- //sample data : highcharts.js -->
                        <!-- sample data : highcharts.js -->
                        <div class="data_inner_tw">
                            <div id="donut-container02" style="width: 45%; height: 200px;"></div>
                            <div style="width: 50%; font-family: Arial, sans-serif; color: #555;padding-left: 20px;">
                                <ul style="list-style:none; padding:0; margin:0; font-size:14px; line-height:1.8;display: flex;flex-direction: column; justify-content: center; height: 100%; gap: 10px;">
                                    <li><span style="color:#ff69b4;">20대</span> : 5,669건 (3.2%)</li>
                                    <li><span style="color:#ffcc00;">30대</span> : 79,766건 (36.1%)</li>
                                    <li><span style="color:#66ccff;">40대</span> : 86,897건 (33.3%)</li>
                                    <li><span style="color:#99ff99;">50대</span> : 48,346건 (18.6%)</li>
                                    <li><span style="color:#cc99ff;">60대</span> : 21,524건 (8.8%)</li>
                                </ul>
                                <!-- <div style="margin-top:10px; font-weight:bold; font-size:18px;">
                                전체 합계: 3,656건
                                </div> -->
                            </div>
                            
                        </div>
                        <script>
                        Highcharts.chart('donut-container02', {
                        chart: {
                            type: 'pie',
                            backgroundColor: 'transparent',
                            options3d: {
                            enabled: true,
                            alpha: 45
                            }
                        },
                        // title: { text: '연령대별 거래 비율' },
                        title: null,
                        plotOptions: {
                            pie: {
                            innerSize: 50,
                            depth: 45,
                            dataLabels: {
                                enabled: true,
                                format: '{point.name}: {point.percentage:.1f}%'
                            }
                            }
                        },
                        series: [{
                            name: '비율',
                            data: [
                            { name: '20대', y: 5669, color: '#ff69b4' },
                            { name: '30대', y: 79766, color: '#ffcc00' },
                            { name: '40대', y: 86897, color: '#66ccff' },
                            { name: '50대', y: 48346, color: '#99ff99' },
                            { name: '60대', y: 21524, color: '#cc99ff' }
                            ]
                        }]
                        });
                        </script>
                        <!-- //sample data : highcharts.js -->
                    </div>
                </div>
            </div>
            <div class="a_colum a_center ac2">
                <div class="type_list list_map">
                    <div class="title">
                        <p class="tit">재정 현황 map</p>
                        <div class="info_box">
                            <span class="info_icon"></span>
                            <p class="info_tag">각 지역을 클릭하시면, 해당 지역의 데이터를 확인하실 수 있습니다.</p>
                        </div>
                    </div>
                    <div class="data_area map_data">
                        <!-- smaple data : img -->
                        <img src="../src/assets/images/map01.png" alt="map" style="display: block;width: 100%; height: 100%;"/>
                        <!-- //smaple data : img -->
                    </div>
                </div>
                <div class="type_list list_stats">
                    <div class="title sb">
                        <p class="tit">서울특별시 당일 자체 세외수입액 9.32억원</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp03">더보기</a>
                    </div>
                    <div class="data_area">
                        <!-- sample data : echarts.js -->
                        <div id="sankeyChart"></div>
                        <script>
                        var chart = echarts.init(document.getElementById('sankeyChart'));

                        chart.setOption({
                            tooltip: { trigger: 'item', triggerOn: 'mousemove' },
                            series: {
                            type: 'sankey',
                            layout: 'none',
                            emphasis: { focus: 'adjacency' },
                            lineStyle: { color: 'gradient', curveness: 0.5 },
                            data: [
                                { name: '강남구' }, { name: '은평구' }, { name: '송파구' },
                                { name: '사회복지' }, { name: '환경' }, { name: '교육' }, { name: '산업·중소기업' }
                            ],
                            links: [
                                { source: '강남구', target: '사회복지', value: 20 },
                                { source: '강남구', target: '환경', value: 5 },
                                { source: '은평구', target: '사회복지', value: 13 },
                                { source: '은평구', target: '교육', value: 3 },
                                { source: '송파구', target: '산업·중소기업', value: 7 },
                                { source: '송파구', target: '사회복지', value: 10 }
                            ]
                            }
                        });

                        // 반응형 resize
                        window.addEventListener('resize', function() {
                            chart.resize();
                        });
                        </script>
                    <!-- //sample data : echarts.js -->
                    </div>
                </div>
            </div>
            <div class="a_colum a_right ac3">
                <div class="type_list news">
                    <div class="title sb">
                        <p class="tit">재정 키워드 뉴스</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp04">더보기</a>
                    </div>
                    <div class="data_area">
                        <!-- sample data : echarts.js -->
                        <div id="wordCloud" style="width:100%;height:200px;"></div>
                        <script>
                        var chart = echarts.init(document.getElementById('wordCloud'));

                        chart.setOption({
                        title: { text: '재정 키워드 뉴스', left: 'center', textStyle:{color:'#fff'} },
                        series: [{
                            type: 'wordCloud',
                            shape: 'circle',
                            sizeRange: [12, 40],
                            rotationRange: [-45, 90],
                            textStyle: {
                            color: () => 'rgb(' + [
                                Math.round(Math.random()*160),
                                Math.round(Math.random()*160),
                                Math.round(Math.random()*160)
                            ].join(',') + ')'
                            },
                            data: [
                            { name: '어린이집', value: 10000 },
                            { name: '장애인', value: 6181 },
                            { name: '1인가구', value: 4386 },
                            { name: '참여예산', value: 4055 },
                            { name: '발달장애인', value: 2467 },
                            { name: '지역아동센터', value: 2244 }
                            ]
                        }]
                        });
                        </script>
                        <!-- //sample data : echarts.js -->
                    </div>
                </div>
                <div class="type_list left">
                    <div class="title sb">
                        <p class="tit">재정 자립도</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp05">더보기</a>
                    </div>
                    <div class="box_cont">
                        <!-- sample data : echarts.js -->
                         <div id="barLineChart" style="width:100%;height:250px;"></div>
                        <script>
                        var chart2 = echarts.init(document.getElementById('barLineChart'));

                        chart2.setOption({
                        title: { text: '재정 자립도', left:'center', textStyle:{color:'#fff'} },
                        tooltip: { trigger: 'axis' },
                        xAxis: { type: 'category', data: ['2016','2017','2018','2019','2020','2021','2022','2023','2024','2025'], axisLabel:{color:'#fff'} },
                        yAxis: { type: 'value', axisLabel:{color:'#fff'} },
                        series: [
                            {
                            name: '자립도',
                            type: 'bar',
                            data: [22.1, 24.0, 23.8, 22.6, 21.2, 22.0, 23.3, 24.8, 21.9, 20.3],
                            itemStyle: { color:'#40a9ff' }
                            },
                            {
                            name: '추세',
                            type: 'line',
                            data: [22.1, 24.0, 23.8, 22.6, 21.2, 22.0, 23.3, 24.8, 21.9, 20.3],
                            itemStyle: { color:'#ffa940' }
                            }
                        ]
                        });
                        </script>
                        <!-- //sample data : echarts.js -->
                    </div>
                </div>
                <div class="type_list right">
                    <div class="title sb">
                        <p class="tit">재정 편성액 map</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp06">더보기</a>
                    </div>
                    <div class="box_cont">
                        <!-- sample data : echarts.js -->
                         <div id="treemap" style="width:100%;height:200px;"></div>
                        <script>
                        var chart3 = echarts.init(document.getElementById('treemap'));

                        chart3.setOption({
                        // title: { text: '재정 편성액 Map', left: 'center', textStyle:{color:'#fff'} },
                        tooltip: { formatter: (info) => info.name + ': ' + info.value },
                        series: [{
                            type: 'treemap',
                            roam: false,
                            nodeClick: false,
                            label: { show: true, formatter: '{b}', color:'#fff' },
                            data: [
                            {
                                name: '사회복지',
                                value: 10000,
                                children: [
                                { name: '기초연금', value: 4000 },
                                { name: '보육지원', value: 2000 },
                                { name: '장애인복지', value: 1500 }
                                ]
                            },
                            {
                                name: '교육',
                                value: 6000,
                                children: [
                                { name: '학교지원', value: 3000 },
                                { name: '급식지원', value: 1000 }
                                ]
                            },
                            {
                                name: '환경',
                                value: 3000,
                                children: [
                                { name: '대기관리', value: 1000 },
                                { name: '폐기물', value: 500 }
                                ]
                            }
                            ]
                        }]
                        });
                        </script>
                        <!-- //sample data : echarts.js -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- //type A -->
</section>
<!-- layer popup -->
<div id="layerPopup" class="popup_wrap">
  <div class="popup_inner">
    <button class="popup_close" onclick="closePopup()">
        <svg width="24" height="24" viewBox="0 0 24 24">
            <line x1="4" y1="4" x2="20" y2="20" stroke="black" stroke-width="2"/>
            <line x1="20" y1="4" x2="4" y2="20" stroke="black" stroke-width="2"/>
        </svg>
    </button>
    <div id="popupContent"></div>
  </div>
</div>
<!-- //layer popup -->


</body>
<script>
    // popup
    const popupData = {
        lp01: "<img src='../src/assets/images/sample/sample_08_img01.png'>",
        lp02: "<img src='../src/assets/images/sample/sample_08_img02.png'>",
        lp03: "<img src='../src/assets/images/sample/sample_08_img03.png'>",
        lp04: "<img src='../src/assets/images/sample/sample_08_img04.png'>",
        lp05: "<img src='../src/assets/images/sample/sample_08_img05.png'>",
        lp06: "<img src='../src/assets/images/sample/sample_08_img06.png'>",
    };
    function showPopup(el) {
        const id = el.dataset.id; 
        document.getElementById('popupContent').innerHTML = popupData[id] || "<p>데이터 없음</p>";
        document.getElementById('layerPopup').style.display = 'block';
    }
    function closePopup() {
        document.getElementById('layerPopup').style.display = 'none';
    }
</script>
</html>