<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Portal</title>
    <link rel="stylesheet" href="../src/css/reset.css">
    <link rel="stylesheet" href="../src/css/common.css">
    <link rel="stylesheet" href="../src/css/typeA.css">
    <script src="../src/js/common.js" defer></script>
    <script src="../src/js/typeA.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script> <!-- sample data -->
    <script src="https://code.highcharts.com/highcharts-3d.js"></script> <!-- sample data -->
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script> <!-- sample data -->
    <script src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"></script> <!-- sample data -->
</head>
<body>
<!-- header -->
<div id="header"></div>
<script>
    setTimeout(() => {
        document.getElementById('population-link').classList.add('active'); /* 인구통계 active */
    }, 50);
</script>
<!-- //header -->
<section>
    <h1 class="blind">서울특별시 인구 증감율</h1>
    <!-- type A -->
    <div class="type_a_wrap layout">
        <div class="type_a_gird">
            <div class="a_colum a_left ac3">
                <div class="type_list">
                    <div class="title sb">
                        <p class="tit">인구 현황</p>
                        <a href="javascript:;" onclick="showPopup();" class="more_btn">더보기</a>
                    </div>
                    <div class="data_area">
                        <!-- sample data : highcharts.js -->
                        
                        <div id="container"></div>
                        <script>
                        Highcharts.chart('container', {
                            chart: {
                                type: 'pie',
                                backgroundColor: 'transparent',
                                options3d: {
                                    enabled: true,
                                    alpha: 45,
                                    beta: 0
                                },
                                height: 200
                            },
                            title: null,
                            subtitle: null,
                            plotOptions: {
                                pie: {
                                    innerSize: 100,   // 도넛 두께
                                    depth: 45,        // 원통 높이
                                    //startAngle: -90,  // 시작 각도 (위쪽 반 잘라냄)
                                    //endAngle: 90,     // 끝 각도
                                    //center: ['50%', '75%'] // 아래쪽으로 내림
                                }
                            },
                            series: [{
                                data: [
                                    ['10대', 12],
                                    ['20대', 19],
                                    ['30대', 14],
                                    ['40대', 18],
                                    ['50대', 22],
                                    ['60대', 15]
                                ]
                            }]
                        });
                        </script>
                        <!-- //sample data : highcharts.js -->
                    </div>
                </div>
                <div class="type_list">
                    <div class="title sb">
                        <p class="tit">서울특별시 구 단위별 인구 증감율</p>
                        <a href="javascript:;" onclick="showPopup();" class="more_btn">더보기</a>
                    </div>
                    <div class="data_area scroll">
                        <!-- sample data : highcharts.js -->
                        <div class="data_inner_tw">
                            <div id="lineChart1" class="chartBox"></div>
                            <div id="lineChart2" class="chartBox"></div>
                            <div id="lineChart3" class="chartBox"></div>
                            <div id="lineChart4" class="chartBox"></div>
                            <div id="lineChart5" class="chartBox"></div>
                            <div id="lineChart6" class="chartBox"></div>
                        </div>

                        <script>
                        const allChartData = [
                            [12, 19, 14, 18, 22, 15],   // lineChart1
                            [8, 11, 17, 13, 9, 16],     // lineChart2
                            [20, 14, 18, 12, 15, 10],   // lineChart3
                            [5, 9, 12, 8, 11, 7],       // lineChart4
                            [14, 16, 13, 19, 17, 15],   // lineChart5
                            [10, 12, 8, 14, 9, 11]      // lineChart6
                        ];

                        const chartIds = ['lineChart1','lineChart2','lineChart3','lineChart4','lineChart5','lineChart6'];

                        chartIds.forEach((chartId, idx) => {
                            Highcharts.chart(chartId, {
                                chart: { type: 'areaspline', backgroundColor: 'transparent' },
                                // title: { text: '연령대별 추세 (샘플)' },
                                title: null,
                                xAxis: { categories: ['10대','20대','30대','40대','50대','60대'], gridLineWidth: 0 },
                                yAxis: { title: { text: '인구 수 (천명)' }, gridLineWidth: 0 },
                                tooltip: { valueSuffix: '천명' },
                                plotOptions: { areaspline: { fillOpacity: 0.4, marker: { enabled: true, radius: 4 }, lineWidth: 3 } },
                                series: [{ name: '2024', data: allChartData[idx], color: '#4FC3F7' }]
                            });
                        });
                        </script>
                        <!-- //sample data : highcharts.js -->
                    </div>
                </div>
                <div class="type_list">
                    <div class="title sb">
                        <p class="tit">인구현황</p>
                        <a href="javascript:;" onclick="showPopup();" class="more_btn">더보기</a>
                    </div>
                    <div class="data_area">
                         <!-- sample data : highcharts.js -->
                        <div id="populationPyramid" style="height:250px;"></div>

                        <script>
                        Highcharts.chart('populationPyramid', {
                            chart: { type: 'bar', backgroundColor: 'transparent' },
                            // title: { text: '서울시 1세대 인구분포도 (연령/성별)' },
                            title: null,
                            xAxis: {
                                categories: ['0-9','10-19','20-29','30-39','40-49','50-59','60-69','70-79','80-89','90+'],
                                reversed: false,
                                labels: { step: 1 }
                            },
                            yAxis: {
                                title: { text: '인구 수' },
                                labels: {
                                    formatter: function () {
                                        return Math.abs(this.value);
                                    }
                                }
                            },
                            plotOptions: {
                                series: { stacking: 'normal' }
                            },
                            tooltip: {
                                formatter: function () {
                                    return '<b>' + this.series.name + ', ' + this.point.category + '</b>: ' +
                                        Highcharts.numberFormat(Math.abs(this.point.y), 0);
                                }
                            },
                            series: [
                                { name: '남성', data: [-58482, -193862, -129241, -64621, -30000, -25000, -20000, -15000, -10000, -5000], color: '#4CAF50' },
                                { name: '여성', data: [63189, 126378, 189567, 252756, 200000, 180000, 150000, 120000, 80000, 30000], color: '#F06292' }
                            ]
                        });
                        </script>
                        <!-- //sample data : highcharts.js -->
                    </div>   
                </div>
            </div>
            <div class="a_colum a_center ac2">
                <div class="type_list list_map">
                    <div class="title">
                        <p class="tit">map</p>
                        <div class="info_box">
                            <span class="info_icon"></span>
                            <p class="info_tag">각 지역을 클릭하시면, 해당 지역의 데이터를 확인하실 수 있습니다.</p>
                        </div>
                    </div>
                    <div class="data_area map_data">
                        <!-- smaple data : img -->
                        <img src="../src/assets/images/map01.png" alt="map" style="display: block;width: 100%; height: 100%;"/>
                        <!-- //smaple data : img -->
                    </div>
                </div>
                <div class="type_list list_stats">
                    <div class="title sb">
                        <p class="tit">graph</p>
                        <a href="javascript:;" onclick="showPopup();" class="more_btn">더보기</a>
                    </div>
                    <div class="data_area">
                        <!-- sample data : echarts.js -->
                        <div id="3dBar" style="width:600px;height:330px;"></div>
                        <script>
                        var chart = echarts.init(document.getElementById('3dBar'));
                        chart.setOption({
                            tooltip: {},
                            visualMap: { max: 20, inRange: { color: ['#87CEFA','#FF69B4'] } },
                            xAxis3D: { type: 'category', data: ['강남구','서초구','송파구'] },
                            yAxis3D: { type: 'category', data: ['2022','2023','2024'] },
                            zAxis3D: { type: 'value' },
                            grid3D: { boxWidth: 200, boxDepth: 80, light: { main: { intensity: 1.2 } } },
                            series: [{
                                type: 'bar3D',
                                data: [
                                    [0,0,12], [0,1,18], [0,2,15],
                                    [1,0,9],  [1,1,14], [1,2,20],
                                    [2,0,8],  [2,1,16], [2,2,10]
                                ],
                                shading: 'lambert'
                            }]
                        });
                        </script>
                        <!-- //sample data : echarts.js -->
                    </div>
                </div>
            </div>
            <div class="a_colum a_right ac3">
                <div class="type_list news">
                    <div class="title sb">
                        <p class="tit">live news | seoul my soul</p>
                        <a href="javascript:;" onclick="showPopup();" class="more_btn">더보기</a>
                    </div>
                    <div class="data_area video_data">
                    </div>
                </div>
                <div class="type_list left">
                    <div class="title sb">
                        <p class="tit">인구현황</p>
                        <a href="javascript:;" onclick="showPopup();" class="more_btn">더보기</a>
                    </div>
                    <div class="box_cont">
                        <!-- sample data : highcharts.js  : 서울특별시 구 단위별 인구 증감율과 동일 데이터 id값에 _r만 추가되어 분리한 상태. -->
                        <div class="data_inner_tw">
                            <div id="lineChart1_r" class="chartBox"></div>
                            <div id="lineChart2_r" class="chartBox"></div>
                            <div id="lineChart3_r" class="chartBox"></div>
                            <div id="lineChart4_r" class="chartBox"></div>
                            <div id="lineChart5_r" class="chartBox"></div>
                            <div id="lineChart6_r" class="chartBox"></div>
                        </div>

                        <script>
                        const allChartData_r = [
                            [12, 19, 14, 18, 22, 15],   // lineChart1_r
                            [8, 11, 17, 13, 9, 16],     // lineChart2_r
                            [20, 14, 18, 12, 15, 10],   // lineChart3_r
                            [5, 9, 12, 8, 11, 7],       // lineChart4_r
                            [14, 16, 13, 19, 17, 15],   // lineChart5_r
                            [10, 12, 8, 14, 9, 11]      // lineChart6_r
                        ];

                        const chartIds_r = ['lineChart1_r','lineChart2_r','lineChart3_r','lineChart4_r','lineChart5_r','lineChart6_r'];

                        chartIds_r.forEach((chartId, idx) => {
                            Highcharts.chart(chartId, {
                                chart: { type: 'areaspline', backgroundColor: 'transparent' },
                                title: null,
                                xAxis: { categories: ['10대','20대','30대','40대','50대','60대'], gridLineWidth: 0 },
                                yAxis: { title: { text: '인구 수 (천명)' }, gridLineWidth: 0 },
                                tooltip: { valueSuffix: '천명' },
                                plotOptions: { areaspline: { fillOpacity: 0.4, marker: { enabled: true, radius: 4 }, lineWidth: 3 } },
                                series: [{ name: '2024', data: allChartData_r[idx], color: '#4FC3F7' }]
                            });
                        });
                        </script>
                        <!-- //sample data : highcharts.js -->
                    </div>
                </div>
                <div class="type_list right">
                    <div class="title sb">
                        <p class="tit">연령대별 분포도</p>
                        <a href="javascript:;" onclick="showPopup();" class="more_btn">더보기</a>
                    </div>
                    <div class="box_cont">
                        <div id="ageChart" style="height:200px;"></div>
                        <script>
Highcharts.chart('ageChart', {
    chart: {
        backgroundColor: 'transparent'
    },
    // title: { text: '연령대별 분포도' },
    title: null,
    xAxis: {
        categories: ['10대','20대','30대','40대','50대','60대']
    },
    yAxis: {
        min: 0,
        title: { text: '인구 수 (천명)' }
    },
    plotOptions: {
        column: {
            depth: 25
        },
        pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            showInLegend: true,
            center: ['80%', '30%'],  // 오른쪽 위에 파이 배치
            size: 120,
            dataLabels: { enabled: false }
        }
    },
    series: [
        // 1. 막대그래프
        {
            type: 'column',
            name: '인구 수',
            data: [12, 19, 14, 18, 22, 15],
            colorByPoint: true,
        },
        // 2. 원형그래프 (같은 데이터 재사용)
        {
            type: 'pie',
            name: '비율',
            data: [
                ['10대', 12],
                ['20대', 19],
                ['30대', 14],
                ['40대', 18],
                ['50대', 22],
                ['60대', 15]
            ],
            showInLegend: false,
            size: 120,
            center: ['80%', '100%'] // 위치 조정
        }
    ]
});
</script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- //type A -->
</section>


</body>
<script>
    //popup
    function showPopup() {
        const popupW = 1200;
        const popupH = 730;
        const left = Math.ceil((window.screen.width - popupW)/2);
        const top = Math.ceil((window.screen.height - popupH)/2);
        window.open('../html/popup.html','','width='+popupW+',height='+popupH+',left='+left+',top='+top+',scrollbars=yes,resizable=no,toolbar=no,titlebar=no,menubar=no,location=no')
    }
</script>
</html>