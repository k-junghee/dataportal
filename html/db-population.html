<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Portal</title>
    <link rel="stylesheet" href="../src/css/reset.css">
    <link rel="stylesheet" href="../src/css/common.css">
    <link rel="stylesheet" href="../src/css/typeA.css">
    <script src="../src/js/common.js" defer></script>
    <script src="../src/js/typeA.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script> <!-- sample data -->
    <script src="https://code.highcharts.com/highcharts-3d.js"></script> <!-- sample data -->
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script> <!-- sample data -->
    <script src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"></script> <!-- sample data -->
</head>
<body>
<!-- header -->
<div id="header"></div>
<script>
    setTimeout(() => {
        document.getElementById('population-link').classList.add('active'); /* 인구통계 active */
    }, 50);
</script>
<!-- //header -->
<section>
    <h1 class="blind">서울특별시 인구 증감율</h1>
    <!-- type A -->
    <div class="type_a_wrap layout">
        <div class="type_a_gird">
            <div class="a_colum a_left ac3">
                <div class="type_list">
                    <div class="title sb">
                        <p class="tit">인구 현황</p>
                        <a href="javascript:;" onclick="showPopup(this)" class="more_btn" data-id="lp01">더보기</a>
                    </div>
                    <div class="data_area">
                        <!-- sample data : highcharts.js -->
                         <div class="data_inner_tw">
                            <!-- 좌측: 텍스트 영역 -->
                            <div class="txt_graph">
                                <ul>
                                    <li><span style="color:#ff69b4;">출생</span> : 5,669건 (3.2%)</li>
                                    <li><span style="color:#ffcc00;">사망</span> : 79,766건 (36.1%)</li>
                                    <li><span style="color:#66ccff;">전출</span> : 86,897건 (33.3%)</li>
                                    <li><span style="color:#99ff99;">전입</span> : 48,346건 (18.6%)</li>
                                    <li><span style="color:#cc99ff;">총인구</span> : 21,524건 (8.8%)</li>
                                </ul>
                                <!-- <div style="margin-top:10px; font-weight:bold; font-size:18px;">
                                전체 합계: 3,656건
                                </div> -->
                            </div>
                            <div id="donut-container" style="width: 45%; height: 180px;"></div>
                        </div>
                        <script>
                        // 왼쪽: 연령대별 거래 현황
                        Highcharts.chart('donut-container', {
                        chart: {
                            type: 'pie',
                            backgroundColor: 'transparent',
                            options3d: {
                            enabled: true,
                            alpha: 45
                            }
                        },
                        // title: { text: '연령대별 거래 비율' },
                        title: null,
                        plotOptions: {
                            pie: {
                            innerSize: 50,
                            depth: 45,
                            dataLabels: {
                                enabled: true,
                                format: '{point.name}: {point.percentage:.1f}%'
                            }
                            }
                        },
                        series: [{
                            name: '비율',
                            data: [
                            { name: '출생', y: 5669, color: '#ff69b4' },
                            { name: '사망', y: 79766, color: '#ffcc00' },
                            { name: '전출', y: 86897, color: '#66ccff' },
                            { name: '전입', y: 48346, color: '#99ff99' },
                            { name: '총인구', y: 21524, color: '#cc99ff' }
                            ]
                        }]
                        });
                        </script>
                        <!-- //sample data : highcharts.js -->
                    </div>
                </div>
                <div class="type_list">
                    <div class="title sb">
                        <p class="tit">서울특별시 구 단위별 인구 증감율</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp02">더보기</a>
                    </div>
                    <div class="data_area scroll">
                        <!-- sample data : highcharts.js -->
                        <div class="data_inner_tw">
                        <div id="lineChart1" class="chartBox"></div>
                        <div id="lineChart2" class="chartBox"></div>
                        <div id="lineChart3" class="chartBox"></div>
                        <div id="lineChart4" class="chartBox"></div>
                        <div id="lineChart5" class="chartBox"></div>
                        <div id="lineChart6" class="chartBox"></div>
                    </div>

                    <script>
                    const allChartData = [
                        [12, 19, 14, 18, 22, 15],   // lineChart1
                        [8, 11, 17, 13, 9, 16],     // lineChart2
                        [20, 14, 18, 12, 15, 10],   // lineChart3
                        [5, 9, 12, 8, 11, 7],       // lineChart4
                        [14, 16, 13, 19, 17, 15],   // lineChart5
                        [10, 12, 8, 14, 9, 11]      // lineChart6
                    ];

                    const chartTitles = [
                        '송파구', 
                        '관악구', 
                        '강서구', 
                        '강남구', 
                        '노원구', 
                        '은평구'
                    ];

                    const chartIds = ['lineChart1','lineChart2','lineChart3','lineChart4','lineChart5','lineChart6'];

                    chartIds.forEach((chartId, idx) => {
                        Highcharts.chart(chartId, {
                            chart: { 
                                type: 'areaspline', 
                                backgroundColor: 'transparent',
                                // margin: [10, 10, 10, 10],   
                                // spacing: [0, 0, 0, 0]       
                            },
                            title: { 
                                text: chartTitles[idx],
                                align: 'left',           
                                style: {
                                    color: 'var(--ft-cl-gray)',    
                                    fontSize: '14px',      
                                    fontWeight: 'bold',   
                                    fontFamily: 'Arial, sans-serif' 
                                }
                            },
                            xAxis: { 
                                categories: ['10대','20대','30대','40대','50대','60대'],
                                lineColor: '#888888',         
                                tickColor: '#888888',         
                                labels: { style: { color: 'var(--ft-cl-gray)', fontSize: '12px' } },
                                gridLineColor: '#CCCCCC'     
                            },
                            yAxis: { 
                                title: { text: '인구 수 (천명)', style: { color: 'var(--ft-cl-gray)' } },
                                lineColor: '#888888',
                                tickColor: '#888888',
                                labels: { style: { color: 'var(--ft-cl-gray)', fontSize: '12px' } },
                                gridLineColor: '#EEEEEE'
                            },
                            tooltip: { valueSuffix: '천명' },
                            plotOptions: { 
                                areaspline: { 
                                    fillOpacity: 0.4, 
                                    marker: { enabled: true, radius: 4 }, 
                                    lineWidth: 3 
                                } 
                            },
                            series: [{ name: '2024', data: allChartData[idx], color: '#4FC3F7' }]
                        });
                    });
                    </script>

                        <!-- //sample data : highcharts.js -->
                    </div>
                </div>
                <div class="type_list">
                    <div class="title sb">
                        <p class="tit">인구현황</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp03">더보기</a>
                    </div>
                    <div class="data_area">
                         <!-- sample data : highcharts.js -->
                        <div id="populationPyramid" style="height:250px;"></div>

                        <script>
                        Highcharts.chart('populationPyramid', {
                        chart: { type: 'bar', backgroundColor: 'transparent' },
                        title: null,
                        xAxis: {
                            categories: ['0-9','10-19','20-29','30-39','40-49','50-59','60-69','70-79','80-89','90+'],
                            reversed: false,
                            labels: { 
                                step: 1,
                                style: { color: 'var(--ft-cl-gray)' }   
                            },
                            lineColor: 'var(--ft-cl-gray)',  
                            tickColor: 'var(--ft-cl-gray)'   
                        },
                        yAxis: {
                            title: { 
                                text: '인구 수', 
                                style: { color: 'var(--ft-cl-gray)' }  
                            },
                            labels: {
                                formatter: function () {
                                    return Math.abs(this.value);
                                },
                                style: { color: 'var(--ft-cl-gray)' }   
                            },
                            lineColor: 'var(--ft-cl-gray)',  
                            tickColor: 'var(--ft-cl-gray)'   
                        },
                        plotOptions: { series: { stacking: 'normal' } },
                        tooltip: {
                            formatter: function () {
                                return '<b>' + this.series.name + ', ' + this.point.category + '</b>: ' +
                                    Highcharts.numberFormat(Math.abs(this.point.y), 0);
                            }
                        },
                        series: [
                            { name: '남성', data: [-58482, -193862, -129241, -64621, -30000, -25000, -20000, -15000, -10000, -5000], color: '#4CAF50' },
                            { name: '여성', data: [63189, 126378, 189567, 252756, 200000, 180000, 150000, 120000, 80000, 30000], color: '#F06292' }
                        ]
                    });
                        </script>
                        <!-- //sample data : highcharts.js -->
                    </div>   
                </div>
            </div>
            <div class="a_colum a_center ac2">
                <div class="type_list list_map">
                    <div class="title">
                        <p class="tit">map</p>
                        <div class="info_box">
                            <span class="info_icon"></span>
                            <p class="info_tag">각 지역을 클릭하시면, 해당 지역의 데이터를 확인하실 수 있습니다.</p>
                        </div>
                    </div>
                    <div class="data_area map_data">
                        <!-- smaple data : img -->
                        <img src="../src/assets/images/map01.png" alt="map" style="display: block;width: 100%; height: 100%;"/>
                        <!-- //smaple data : img -->
                    </div>
                </div>
                <div class="type_list list_stats">
                    <div class="title sb">
                        <p class="tit"></p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp04">더보기</a>
                    </div>
                    <div class="data_area">
                        <!-- sample data : echarts.js -->
                        <div id="bar3d" style="width: 100%; height: 330px;"></div>

                        <script>
                        window.addEventListener('load', function() {
                            var container = document.getElementById('bar3d');
                            var chart = echarts.init(container);

                            var xData = ['강남구','서초구','송파구'];
                            var yData = ['2022','2023','2024'];
                            var seriesData = [
                                [0,0,12],[0,1,18],[0,2,15],
                                [1,0,9],[1,1,14],[1,2,20],
                                [2,0,8],[2,1,16],[2,2,10]
                            ];
                            

                            function getOption() {
                                return {
                                    tooltip: {},
                                    visualMap: { max: 20, inRange: { color: ['#87CEFA','#FF69B4'] } },
                                    xAxis3D: { 
                                        type: 'category', 
                                        data: xData,
                                        axisLabel: { color: 'var(--ft-cl-gray)' }, // x축 글자색
                                        axisLine: { lineStyle: { color: 'var(--ft-cl-gray)' } }, // x축 선 색
                                        axisTick: { lineStyle: { color: 'var(--ft-cl-gray)' } }   // x축 눈금선 색
                                    },
                                    yAxis3D: { 
                                        type: 'category', 
                                        data: yData,
                                        axisLabel: { color: 'var(--ft-cl-gray)' }, // y축 글자색
                                        axisLine: { lineStyle: { color: 'var(--ft-cl-gray)' } }, // y축 선 색
                                        axisTick: { lineStyle: { color: 'var(--ft-cl-gray)' } }   // y축 눈금선 색
                                    },
                                    zAxis3D: { 
                                        type: 'value',
                                        axisLabel: { color: 'var(--ft-cl-gray)' }, // z축 글자색
                                        axisLine: { lineStyle: { color: 'var(--ft-cl-gray)' } },
                                        axisTick: { lineStyle: { color: 'var(--ft-cl-gray)' } }
                                    },
                                    grid3D: {
                                        boxWidth: 200,
                                        boxDepth: 80,
                                        boxHeight: 200,
                                        viewControl: {
                                            alpha: 30,
                                            beta: 0,
                                            center: [0,0,0],
                                            distance: 200,
                                            zoomSensitivity: 2
                                        },
                                        light: { main: { intensity: 1.2 } }
                                    },
                                    series: [{
                                        type: 'bar3D',
                                        data: seriesData,
                                        shading: 'lambert'
                                    }],
                                    tooltip: { show: false }
                                };
                            }



                            chart.setOption(getOption());

                            window.addEventListener('resize', function() {
                                chart.resize();
                                chart.setOption(getOption());
                            });
                        });
                        </script>
                        <!-- //sample data : echarts.js -->
                    </div>
                </div>
            </div>
            <div class="a_colum a_right ac3">
                <div class="type_list news">
                    <div class="title sb">
                        <p class="tit">live news | seoul my soul</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp05">더보기</a>
                    </div>
                    <div class="data_area video_data">
                         <!-- <img src="../src/assets/images/test/img_test_pop_news.png">  -->
                        <img src="../src/assets/images/news_enpyeonggu.gif">
                    </div>
                </div>
                <div class="type_list">
                    <div class="title sb">
                        <p class="tit">인구현황</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp06">더보기</a>
                    </div>
                    <div class="data_area scroll">
                        <!-- sample data : highcharts.js  : 서울특별시 구 단위별 인구 증감율과 동일 데이터 id값에 _r만 추가되어 분리한 상태. -->
                        <div class="data_inner_tw">
                            <div id="lineChart1_r" class="chartBox"></div>
                            <div id="lineChart2_r" class="chartBox"></div>
                        </div>

                        <script>
                        const allChartData_r = [
                            [12, 19, 14, 18, 22, 15],   // lineChart1_r
                            [8, 11, 17, 13, 9, 16],     // lineChart2_r
                        ];

                        const chartIds_r = ['lineChart1_r','lineChart2_r','lineChart3_r','lineChart4_r','lineChart5_r','lineChart6_r'];

                        const chartTitles_r = [
                        '총인구', 
                        '출생', 
                        '사망', 
                        '1인가구', 
                        '전입', 
                        '전출'
                    ];

                        chartIds_r.forEach((chartId, idx) => {
                            Highcharts.chart(chartId, {
                                chart: { 
                                type: 'areaspline', 
                                backgroundColor: 'transparent',
                                // margin: [10, 10, 10, 10],   
                                // spacing: [0, 0, 0, 0]       
                            },
                            title: { 
                                text: chartTitles_r[idx],
                                align: 'left',           
                                style: {
                                    color: 'var(--ft-cl-gray)',    
                                    fontSize: '14px',      
                                    fontWeight: 'bold',   
                                    fontFamily: 'Arial, sans-serif' 
                                }
                            },
                            xAxis: { 
                                categories: ['10대','20대','30대','40대','50대','60대'],
                                lineColor: '#888888',         
                                tickColor: '#888888',         
                                labels: { style: { color: 'var(--ft-cl-gray)', fontSize: '12px' } },
                                gridLineColor: '#CCCCCC'     
                            },
                            yAxis: { 
                                title: { text: '인구 수 (천명)', style: { color: 'var(--ft-cl-gray)' } },
                                lineColor: '#888888',
                                tickColor: '#888888',
                                labels: { style: { color: 'var(--ft-cl-gray)', fontSize: '12px' } },
                                gridLineColor: '#EEEEEE'
                            },
                            tooltip: { valueSuffix: '천명' },
                            plotOptions: { 
                                areaspline: { 
                                    fillOpacity: 0.4, 
                                    marker: { enabled: true, radius: 4 }, 
                                    lineWidth: 3 
                                } 
                            },
                            series: [{ name: '2024', data: allChartData[idx], color: '#4FC3F7' }]
                            });
                        });
                        </script>
                        <!-- //sample data : highcharts.js -->
                    </div>
                </div>
                <div class="type_list right">
                    <div class="title sb">
                        <p class="tit">연령대별 분포도</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp07">더보기</a>
                    </div>
                    <div class="box_cont">
                        <!-- sample data : highcharts.js -->
                        <div class="data_inner_tw">
                            <div id="barChart" class="chart-box" style="width: 45%; height:200px;"></div>
                            <div id="pieChart" class="chart-box" style="width: 45%; height:200px;"></div>
                        </div>
                        <script>
                        // 데이터 (연령대별)
                        const categories = ['10대', '20대', '30대', '40대', '50대', '60대', '70대', '80대'];
                        const values = [2.34, 13.96, 14.82, 17.85, 19.59, 17.19, 14.24, 2.12];

                        // 가로 막대그래프
                        Highcharts.chart('barChart', {
                            chart: {
                                type: 'bar',
                                backgroundColor: 'transparent'
                            },
                            // title: {
                            //     text: '연령대별 분포도'
                            // },
                            title: null,
                            xAxis: {
                                categories: categories,
                                title: { text: null },
                                labels: { style: { color: 'var(--ft-cl-gray)' } },      
                                lineColor: 'var(--ft-cl-gray)',                        
                                tickColor: 'var(--ft-cl-gray)'
                            },
                            yAxis: {
                                min: 0,
                                title: {
                                text: '비율 (%)',
                                align: 'high',
                                style: { color: 'var(--ft-cl-gray)' }
                                },
                                labels: { style: { color: 'var(--ft-cl-gray)' } }, 
                                reversed: true,
                                lineColor: 'var(--ft-cl-gray)',
                                tickColor: 'var(--ft-cl-gray)'
                            },
                            tooltip: {
                                valueSuffix: ' %'
                            },
                            plotOptions: {
                                bar: {
                                dataLabels: {
                                    enabled: true,
                                    format: '{y:.2f} %',
                                }
                                }
                            },
                            credits: { enabled: false },
                            series: [{
                                name: '연령대',
                                data: values,
                            }]
                            });

                            // 원형(도넛) 그래프
                            Highcharts.chart('pieChart', {
                            chart: {
                                type: 'pie',
                                backgroundColor: 'transparent'
                            },
                            // title: {
                            //     text: '연령대별 분포도'
                            // },
                            title: null,
                            tooltip: {
                                pointFormat: '<b>{point.y:.2f} %</b>'
                            },
                            plotOptions: {
                                pie: {
                                innerSize: '50%', // 도넛 형태
                                allowPointSelect: true,
                                cursor: 'pointer',
                                dataLabels: {
                                    enabled: true,
                                    format: '{point.name}: {point.y:.2f} %'
                                }
                                }
                            },
                            credits: { enabled: false },
                            series: [{
                                name: '비율',
                                data: categories.map((c, i) => [c, values[i]])
                            }]
                            });
                        </script>
                        <!-- //sample data : highcharts.js -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- //type A -->
</section>

<!-- layer popup -->
<div id="layerPopup" class="popup_wrap">
  <div class="popup_inner">
    <button class="popup_close" onclick="closePopup()">
        <svg width="24" height="24" viewBox="0 0 24 24">
            <line x1="4" y1="4" x2="20" y2="20" stroke="black" stroke-width="2"/>
            <line x1="20" y1="4" x2="4" y2="20" stroke="black" stroke-width="2"/>
        </svg>
    </button>
    <div id="popupContent"></div>
  </div>
</div>
<!-- //layer popup -->


</body>
<script>
    // popup
    const popupData = {
        lp01: "<img src='../src/assets/images/sample/sample_02_img01.png'>",
        lp02: "<img src='../src/assets/images/sample/sample_02_img02.png'>",
        lp03: "<img src='../src/assets/images/sample/sample_02_img03.png'>",
        lp04: "<img src='../src/assets/images/sample/sample_02_img04.png'>",
        lp05: "<img src='../src/assets/images/sample/sample_02_img05.png'>",
        lp06: "<img src='../src/assets/images/sample/sample_02_img06.png'>",
        lp07: "<img src='../src/assets/images/sample/sample_02_img07.png'>",
    };
    function showPopup(el) {
        const id = el.dataset.id; 
        document.getElementById('popupContent').innerHTML = popupData[id] || "<p>데이터 없음</p>";
        document.getElementById('layerPopup').style.display = 'block';
    }
    function closePopup() {
        document.getElementById('layerPopup').style.display = 'none';
    }
</script>
</html>