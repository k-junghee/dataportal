<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Portal</title>
    <link rel="stylesheet" href="../src/css/reset.css">
    <link rel="stylesheet" href="../src/css/common.css">
    <link rel="stylesheet" href="../src/css/typeA.css">
    <script src="../src/js/common.js" defer></script>
    <script src="../src/js/typeA.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script> <!-- sample data -->
    <script src="https://code.highcharts.com/highcharts-3d.js"></script> <!-- sample data -->
</head>
<body>
<!-- header -->
<div id="header"></div>
<script>
    setTimeout(() => {
        document.getElementById('population-link').classList.add('active'); /* 인구통계 active */
    }, 50);
</script>
<!-- //header -->
<section>
    <h1 class="blind">생애 주기별 맞춤 정보 관리</h1>
    <!-- type A -->
    <div class="type_a_wrap layout">
        <div class="type_a_gird">
            <div class="a_colum a_left ac2">
                <div class="type_list list_keyword">
                    <div class="title sb">
                        <p class="tit">수요 급증</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp01">더보기</a>
                    </div>
                    <div class="data_area scroll">
                        <!-- sample data : table -->
                         <div class="db-table long">
                            <div class="table-wrap">
                                <table>
                                <thead>
                                    <tr>
                                    <th>순위</th>
                                    <th>자치구</th>
                                    <th>생애주기</th>
                                    <th>프로그램</th>
                                    <th>전월신청</th>
                                    <th>금월신청</th>
                                    <th>증가율%</th>
                                    </tr>
                                </thead>
                                <tbody id="tableBody">
                                    <tr>
                                    <td>1</td>
                                    <td>성북구</td>
                                    <td>영유아</td>
                                    <td>의료급여</td>
                                    <td>8,407</td>
                                    <td>13,238</td>
                                    <td>+57.5</td>
                                    </tr>
                                    <tr>
                                    <td>2</td>
                                    <td>동대문구</td>
                                    <td>중장년</td>
                                    <td>의료급여</td>
                                    <td>4,736</td>
                                    <td>7,417</td>
                                    <td>+56.6</td>
                                    </tr>
                                    <tr>
                                    <td>3</td>
                                    <td>은평구</td>
                                    <td>중장년</td>
                                    <td>보육료 지원</td>
                                    <td>8,225</td>
                                    <td>12,708</td>
                                    <td>+54.5</td>
                                    </tr>
                                </tbody>
                                </table>
                            </div>
                            </div>
                        <!-- //sample data : table -->
                        <!-- sample data : highcharts.js -->
                        <div id="container01"></div>
                        <script>
                        Highcharts.chart('container01', {
                        chart: { 
                            type: 'line',
                            backgroundColor: 'transparent',
                            height: 200,
                        },
                        // title: { text: '학급당 학생수 추이' },
                        title: null,
                        xAxis: { categories: [2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024] },
                        yAxis: { title: { text: '학생수' } },
                        series: [{
                                name: '초등학교',
                                data: [26.8, 25.7, 23.8, 23.0, 22.8]
                            }, {
                                name: '중학교',
                                data: [22.9, 21.7, 21.0, 20.5, 20.0]
                            }]
                        });
                        </script>
                        <!-- //sample data : highcharts.js -->
                    </div>
                </div>
                <div class="type_list list_keyword">
                    <div class="title sb">
                        <p class="tit">집행 효율 저조</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp02">더보기</a>
                    </div>
                    <div class="data_area scroll">
                        <!-- sample data : table -->
                         <div class="db-table long">
                            <div class="table-wrap">
                                <table>
                                <thead>
                                    <tr>
                                    <th>순위</th>
                                    <th>자치구</th>
                                    <th>생애주기</th>
                                    <th>프로그램</th>
                                    <th>전월신청</th>
                                    <th>금월신청</th>
                                    <th>증가율%</th>
                                    </tr>
                                </thead>
                                <tbody id="tableBody">
                                    <tr>
                                    <td>1</td>
                                    <td>성북구</td>
                                    <td>영유아</td>
                                    <td>의료급여</td>
                                    <td>8,407</td>
                                    <td>13,238</td>
                                    <td>+57.5</td>
                                    </tr>
                                    <tr>
                                    <td>2</td>
                                    <td>동대문구</td>
                                    <td>중장년</td>
                                    <td>의료급여</td>
                                    <td>4,736</td>
                                    <td>7,417</td>
                                    <td>+56.6</td>
                                    </tr>
                                    <tr>
                                    <td>3</td>
                                    <td>은평구</td>
                                    <td>중장년</td>
                                    <td>보육료 지원</td>
                                    <td>8,225</td>
                                    <td>12,708</td>
                                    <td>+54.5</td>
                                    </tr>
                                </tbody>
                                </table>
                            </div>
                            </div>
                        <!-- //sample data : table -->
                        <!-- sample data : highcharts.js -->
                        <div id="container02"></div>
                        <script>
                        Highcharts.chart('container02', {
                        chart: { 
                            type: 'line',
                            backgroundColor: 'transparent',
                            height: 200,
                        },
                        // title: { text: '학급당 학생수 추이' },
                        title: null,
                        xAxis: { categories: [2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024] },
                        yAxis: { title: { text: '학생수' } },
                        series: [{
                                name: '초등학교',
                                data: [26.8, 25.7, 23.8, 23.0, 22.8]
                            }, {
                                name: '중학교',
                                data: [22.9, 21.7, 21.0, 20.5, 20.0]
                            }]
                        });
                        </script>
                        <!-- //sample data : highcharts.js -->
                    </div>
                </div>
            </div>
            <div class="a_colum a_center ac2">
                <div class="type_list list_map">
                    <div class="title">
                        <p class="tit">종합 map</p>
                        <div class="info_box">
                            <span class="info_icon"></span>
                            <p class="info_tag">각 지역을 클릭하시면, 해당 지역의 데이터를 확인하실 수 있습니다.</p>
                        </div>
                    </div>
                    <div class="data_area map_data">
                        <!-- smaple data : img -->
                        <img src="../src/assets/images/map01.png" alt="map" style="display: block;width: 100%; height: 100%;"/>
                        <!-- //smaple data : img -->
                    </div>
                </div>
                <div class="type_list list_stats">
                    <div class="title sb">
                        <p class="tit">서울특별시 청년 일자리 신청 현황 요약</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp03">더보기</a>
                    </div>
                    <div class="data_area scroll">
                        <!-- sample data : highcharts.js -->
                         <div class="data_inner_tw">
                            <div id="donut-container" style="width: 45%; height: 180px;"></div>
                            <div style="width: 50%; font-family: Arial, sans-serif; color: #555;padding-left: 20px;">
                                <ul style="list-style:none; padding:0; margin:0; font-size:14px; line-height:1.8;display: flex;flex-direction: column; justify-content: center; height: 100%; gap: 10px;">
                                    <li><span style="color:#ff69b4;">20대</span> : 5,669건 (3.2%)</li>
                                    <li><span style="color:#ffcc00;">30대</span> : 79,766건 (36.1%)</li>
                                    <li><span style="color:#66ccff;">40대</span> : 86,897건 (33.3%)</li>
                                    <li><span style="color:#99ff99;">50대</span> : 48,346건 (18.6%)</li>
                                    <li><span style="color:#cc99ff;">60대</span> : 21,524건 (8.8%)</li>
                                </ul>
                                <!-- <div style="margin-top:10px; font-weight:bold; font-size:18px;">
                                전체 합계: 3,656건
                                </div> -->
                            </div>
                        </div>
                        <script>
                        // 연령대별 거래 현황
                        Highcharts.chart('donut-container', {
                        chart: {
                            type: 'pie',
                            backgroundColor: 'transparent',
                            options3d: {
                            enabled: true,
                            alpha: 45
                            }
                        },
                        // title: { text: '연령대별 거래 비율' },
                        title: null,
                        plotOptions: {
                            pie: {
                            innerSize: 50,
                            depth: 45,
                            dataLabels: {
                                enabled: true,
                                format: '{point.name}: {point.percentage:.1f}%'
                            }
                            }
                        },
                        series: [{
                            name: '비율',
                            data: [
                            { name: '20대', y: 5669, color: '#ff69b4' },
                            { name: '30대', y: 79766, color: '#ffcc00' },
                            { name: '40대', y: 86897, color: '#66ccff' },
                            { name: '50대', y: 48346, color: '#99ff99' },
                            { name: '60대', y: 21524, color: '#cc99ff' }
                            ]
                        }]
                        });
                        </script>
                        <!-- //sample data : highcharts.js -->
                        <div class="info-bar">
                            <span>예산소진율<strong>60.2%</strong>(14억 8,100만 원 / 24억 6,100만원 )</span>
                        </div>
                         <!-- sample data : table -->
                        <div class="db-table">
                            <div class="table-wrap">
                                <table>
                                <thead>
                                    <tr>
                                        <th>집행액(원)</th>
                                        <th>배정 예산(원)</th>
                                        <th>집행율</th>
                                        <th>순위</th>
                                    </tr>
                                </thead>
                                <tbody id="tableBody00"></tbody>
                                </table>
                            </div>
                        </div>

                        <script>
                            const tableData00 = [
                            {name:'530,000,000', insured:'1,500,000,000', beneficiary:35, rate:25},
                            {name:'530,000,000', insured:'1,500,000,000', beneficiary:35, rate:1},
                            {name:'530,000,000', insured:'1,500,000,000', beneficiary:35, rate:50},
                            {name:'530,000,000', insured:'1,500,000,000', beneficiary:35, rate:30},
                            {name:'530,000,000', insured:'1,500,000,000', beneficiary:35, rate:15},
                            ];

                            // bar-cell 생성 함수
                            function barCell(value, max=10) {
                            const percent = Math.min((value / max) * 100, 100);
                            return `
                                <div class="bar-cell">
                                <div class="bar-fill" style="width:${percent}%;"></div>
                                <span class="bar-label">${value.toFixed(2)}</span>
                                </div>
                            `;
                            }

                            const tbody = document.getElementById('tableBody00');
                            tableData00.forEach(row => {
                            tbody.innerHTML += `
                                <tr>
                                <td>${row.name}</td>
                                <td>${row.insured.toLocaleString()}</td>
                                <td>${row.beneficiary.toLocaleString()}</td>
                                <td>${barCell(row.rate, 10)}</td>
                                </tr>
                            `;
                            });
                        </script>
                        <!-- //sample data : table -->
                    </div>
                </div>
            </div>
            <div class="a_colum a_right ac2">
                <div class="type_list news ac_2h">
                    <div class="title sb">
                        <p class="tit">복지 프로그램 수요-집행 집중도 현황</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp04">더보기</a>
                    </div>
                    <div class="data_area scroll">
                        <!-- sample data : table -->
                        <div class="db-table">
                        <div class="table-wrap">
                            <table style="width: 1100px">
                            <thead>
                                <tr>
                                <th>자치구</th>
                                <th>생애주기</th>
                                <th>프로그램</th>
                                <th>예산액<br>(억)</th>
                                <th>집행액<br>(억)</th>
                                <th>집행률<br>%</th>
                                <th>신청수</th>
                                <th>대기건수</th>
                                <th>1인당 평균지원(만)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>강남구</td><td>영유아</td><td>기초연금</td><td>1,500</td><td>883</td><td>58.9</td><td>18,000</td><td>864</td><td>52</td></tr>
                                <tr><td>서초구</td><td>노년</td><td>자활근로사업</td><td>1,450</td><td>933</td><td>64.3</td><td>17,471</td><td>704</td><td>40</td></tr>
                                <tr><td>송파구</td><td>중장년</td><td>의료급여</td><td>1,400</td><td>782</td><td>55.9</td><td>16,942</td><td>1,211</td><td>54</td></tr>
                                <tr><td>영등포구</td><td>청년</td><td>자활근로사업</td><td>1,350</td><td>784</td><td>58.1</td><td>16,412</td><td>1,093</td><td>41</td></tr>
                                <tr><td>강서구</td><td>청년</td><td>자활근로사업</td><td>1,300</td><td>893</td><td>68.7</td><td>15,883</td><td>1,083</td><td>44</td></tr>
                                <tr><td>노원구</td><td>노년</td><td>자활근로사업</td><td>1,250</td><td>874</td><td>69.9</td><td>15,354</td><td>1,094</td><td>48</td></tr>
                                <tr><td>관악구</td><td>영유아</td><td>주거급여</td><td>1,200</td><td>892</td><td>74.3</td><td>14,825</td><td>865</td><td>37</td></tr>
                                <tr><td>구로구</td><td>중장년</td><td>보육료지원</td><td>1,150</td><td>707</td><td>61.5</td><td>14,296</td><td>897</td><td>46</td></tr>
                                <tr><td>양천구</td><td>영유아</td><td>자활근로사업</td><td>1,100</td><td>687</td><td>62.5</td><td>13,767</td><td>628</td><td>45</td></tr>
                                <tr><td>성북구</td><td>영유아</td><td>의료급여</td><td>1,050</td><td>676</td><td>64.4</td><td>13,238</td><td>590</td><td>51</td></tr>
                                <tr><td>은평구</td><td>중장년</td><td>보육료지원</td><td>1,000</td><td>588</td><td>58.8</td><td>12,708</td><td>848</td><td>55</td></tr>
                                <tr><td>마포구</td><td>노년</td><td>의료급여</td><td>950</td><td>547</td><td>57.6</td><td>12,179</td><td>713</td><td>42</td></tr>
                                <tr><td>동작구</td><td>중장년</td><td>의료급여</td><td>900</td><td>581</td><td>64.6</td><td>11,650</td><td>729</td><td>43</td></tr>
                                <tr><td>강동구</td><td>노년</td><td>주거급여</td><td>850</td><td>506</td><td>59.5</td><td>11,121</td><td>785</td><td>43</td></tr>
                                <tr><td>강북구</td><td>중장년</td><td>기초연금</td><td>800</td><td>547</td><td>68.4</td><td>10,592</td><td>693</td><td>43</td></tr>
                                <tr><td>광진구</td><td>노년</td><td>보육료지원</td><td>750</td><td>478</td><td>63.7</td><td>10,062</td><td>628</td><td>52</td></tr>
                                <tr><td>도봉구</td><td>중장년</td><td>기초연금</td><td>700</td><td>502</td><td>71.7</td><td>9,533</td><td>595</td><td>41</td></tr>
                                <tr><td>서대문구</td><td>영유아</td><td>기초연금</td><td>650</td><td>454</td><td>69.1</td><td>9,004</td><td>470</td><td>38</td></tr>
                                <tr><td>성동구</td><td>노년</td><td>주거급여</td><td>600</td><td>367</td><td>61.2</td><td>8,475</td><td>349</td><td>42</td></tr>
                                <tr><td>충장구</td><td>청년</td><td>보육료지원</td><td>550</td><td>394</td><td>71.6</td><td>7,946</td><td>457</td><td>35</td></tr>
                                <tr><td>동대문구</td><td>중장년</td><td>의료급여</td><td>500</td><td>355</td><td>71.0</td><td>7,417</td><td>360</td><td>37</td></tr>
                                <tr><td>용산구</td><td>청년</td><td>자활근로사업</td><td>450</td><td>282</td><td>62.7</td><td>6,888</td><td>388</td><td>36</td></tr>
                                <tr><td>중구</td><td>영유아</td><td>의료급여</td><td>400</td><td>243</td><td>60.8</td><td>6,358</td><td>471</td><td>51</td></tr>
                                <tr><td>종로구</td><td>노년</td><td>기초연금</td><td>350</td><td>240</td><td>68.6</td><td>5,829</td><td>288</td><td>42</td></tr>
                                <tr><td>금천구</td><td>노년</td><td>기초연금</td><td>300</td><td>173</td><td>57.7</td><td>5,300</td><td>282</td><td>35</td></tr>
                            </tbody>
                            </table>
                        </div>
                        </div>

                        <!-- //sample data : table -->
                    </div>
                </div>
                <div class="type_list news">
                    <div class="title sb">
                        <p class="tit"></p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp05">더보기</a>
                    </div>
                    <div class="data_area">
                        <!-- sample data : highcharts.js -->
                        <div class="data_inner_tw">
                            <div id="barChart" class="chart-box" style="width: 45%; height:200px;"></div>
                            <div id="pieChart" class="chart-box" style="width: 45%; height:200px;"></div>
                        </div>
                        <script>
                        // 데이터 (연령대별)
                        const categories = ['10대', '20대', '30대', '40대', '50대', '60대', '70대', '80대'];
                        const values = [2.34, 13.96, 14.82, 17.85, 19.59, 17.19, 14.24, 2.12];

                        // 가로 막대그래프
                        Highcharts.chart('barChart', {
                            chart: {
                                type: 'bar',
                                backgroundColor: 'transparent'
                            },
                            // title: {
                            //     text: '연령대별 분포도'
                            // },
                            title: null,
                            xAxis: {
                                categories: categories,
                                title: { text: null }
                            },
                            yAxis: {
                                min: 0,
                                title: {
                                text: '비율 (%)',
                                align: 'high'
                                },
                                reversed: true
                            },
                            tooltip: {
                                valueSuffix: ' %'
                            },
                            plotOptions: {
                                bar: {
                                dataLabels: {
                                    enabled: true,
                                    format: '{y:.2f} %'
                                }
                                }
                            },
                            credits: { enabled: false },
                            series: [{
                                name: '연령대',
                                data: values
                            }]
                            });

                            // 원형(도넛) 그래프
                            Highcharts.chart('pieChart', {
                            chart: {
                                type: 'pie',
                                backgroundColor: 'transparent'
                            },
                            // title: {
                            //     text: '연령대별 분포도'
                            // },
                            title: null,
                            tooltip: {
                                pointFormat: '<b>{point.y:.2f} %</b>'
                            },
                            plotOptions: {
                                pie: {
                                innerSize: '50%', // 도넛 형태
                                allowPointSelect: true,
                                cursor: 'pointer',
                                dataLabels: {
                                    enabled: true,
                                    format: '{point.name}: {point.y:.2f} %'
                                }
                                }
                            },
                            credits: { enabled: false },
                            series: [{
                                name: '비율',
                                data: categories.map((c, i) => [c, values[i]])
                            }]
                            });
                        </script>
                        <!-- //sample data : highcharts.js -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- //type A -->
</section>
<!-- layer popup -->
<div id="layerPopup" class="popup_wrap">
  <div class="popup_inner">
    <button class="popup_close" onclick="closePopup()">
        <svg width="24" height="24" viewBox="0 0 24 24">
            <line x1="4" y1="4" x2="20" y2="20" stroke="black" stroke-width="2"/>
            <line x1="20" y1="4" x2="4" y2="20" stroke="black" stroke-width="2"/>
        </svg>
    </button>
    <div id="popupContent"></div>
  </div>
</div>
<!-- //layer popup -->


</body>
<script>
    // popup
    const popupData = {
        lp01: "<img src='../src/assets/images/sample/sample_13_img01.png'>",
        lp02: "<img src='../src/assets/images/sample/sample_13_img02.png'>",
        lp03: "<img src='../src/assets/images/sample/sample_13_img03.png'>",
        lp04: "<img src='../src/assets/images/sample/sample_13_img04.png'>",
        lp05: "<img src='../src/assets/images/sample/sample_13_img05.png'>",
    }
    function showPopup(el) {
        const id = el.dataset.id; 
        document.getElementById('popupContent').innerHTML = popupData[id] || "<p>데이터 없음</p>";
        document.getElementById('layerPopup').style.display = 'block';
    }
    function closePopup() {
        document.getElementById('layerPopup').style.display = 'none';
    }
</script>
</html>