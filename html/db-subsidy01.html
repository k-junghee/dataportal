<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Portal</title>
    <link rel="stylesheet" href="../src/css/reset.css">
    <link rel="stylesheet" href="../src/css/common.css">
    <link rel="stylesheet" href="../src/css/typeA.css">
    <script src="../src/js/common.js" defer></script>
    <script src="../src/js/typeA.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
</head>
<body>
<!-- header -->
<div id="header"></div>
<script>
    setTimeout(() => {
        document.getElementById('population-link').classList.add('active'); /* 인구통계 active */
    }, 50);
</script>
<!-- //header -->
<section>
    <h1 class="blind">서울특별시 정부보조금</h1>
    <!-- type A -->
    <div class="type_a_wrap layout">
        <div class="type_a_gird">
            <div class="a_colum a_left ac3">
                <div class="type_list list_keyword">
                    <div class="title sb">
                        <p class="tit">select area</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp01">더보기</a>
                    </div>
                    <div class="data_area keyword_data"></div>
                </div>
                <div class="type_list list_board">
                    <div class="title sb">
                        <p class="tit">검색결과</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp02">더보기</a>
                    </div>
                    <div class="data_area">
                        table
                    </div>
                </div>
                <div class="type_list list_board">
                    <div class="title sb">
                        <p class="tit">지원금 검색</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp03">더보기</a>
                    </div>
                    <div class="data_area">

                    </div>
                </div>
            </div>
            <div class="a_colum a_center ac2">
                <div class="type_list list_map">
                    <div class="title">
                        <p class="tit">종합 map</p>
                        <div class="info_box">
                            <span class="info_icon"></span>
                            <p class="info_tag">각 지역을 클릭하시면, 해당 지역의 데이터를 확인하실 수 있습니다.</p>
                        </div>
                    </div>
                    <div class="data_area map_data">
                        <!-- smaple data : img -->
                        <img src="../src/assets/images/map01.png" alt="map" style="display: block;width: 100%; height: 100%;"/>
                        <!-- //smaple data : img -->
                    </div>
                </div>
                <div class="type_list list_stats">
                    <div class="title sb">
                        <p class="tit"></p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp04">더보기</a>
                    </div>
                    <div class="data_area">
                        <style>
    body {
      background: #000022;
      color: #1d1d1d;
      font-family: sans-serif;
    }
    .top-section {
      display: flex;
      justify-content: space-around;
      align-items: center;
      flex-wrap: wrap;
      margin-bottom: 40px;
    }
    .text-box {
      width: 45%;
      font-size: 16px;
      line-height: 1.8;
    }
    .highlight {
      color: yellow;
      font-weight: bold;
    }
  </style>
                        <!-- <h2 style="text-align:center; color:yellow;">
                            은평구 2025년 주요 지원사업 예산 및 집행 현황<br>
                            총 7,544억 (<span class="highlight">64.8%</span>)
                        </h2> -->

                        <div class="top-section">
                            <!-- 도넛 그래프 -->
                            <div id="donut" style="width:45%; height:200px;"></div>

                            <!-- 텍스트 영역 -->
                            <div class="text-box">
                            <p>📌 <span class="highlight">은평청 청년실험 지원</span> : 1.7억 (4.15%) → 집행 0.13억 (7.8%)</p>
                            <p>📌 <span class="highlight">서울형 아이돌봄비 지원 사업</span> : 5.9억 (12.6%) → 집행 0.9억 (15.6%)</p>
                            <p>📌 <span class="highlight">다함께돌봄센터 운영비 지원</span> : 7.9억 (16.6%) → 집행 2.0억 (25.4%)</p>
                            <p>📌 <span class="highlight">다함께돌봄센터 인건비 지원</span> : 19.4억 (46.7%) → 집행 5.4억 (28.2%)</p>
                            <p>📌 <span class="highlight">보호대상아동 지원</span> : 0.8억 (1.97%) → 집행 0.04억 (5.4%)</p>
                            <p>📌 <span class="highlight">서울형 가사서비스 지원</span> : 3.5억 (8.42%) → 집행 0.09억 (2.6%)</p>
                            </div>
                        </div>

                        <!-- 막대그래프 -->
                        <div id="bar" style="width:95%; height:200px; margin:0 auto;"></div>

                        <script>
                            // 도넛 차트
                            Highcharts.chart('donut', {
                            chart: {
                                type: 'pie',
                                backgroundColor: 'transparent'
                            },
                            title: {
                                text: '예산액 비중',
                                style: { color: 'white' }
                            },
                            plotOptions: {
                                pie: {
                                innerSize: '50%',
                                dataLabels: {
                                    format: '{point.name}<br>{point.percentage:.1f}%',
                                    style: { color: 'white', textOutline: 'none' }
                                }
                                }
                            },
                            series: [{
                                name: '예산',
                                data: [
                                { name: '청년실험', y: 4.15 },
                                { name: '아이돌봄비', y: 12.60 },
                                { name: '돌봄 운영비', y: 16.60 },
                                { name: '돌봄 인건비', y: 46.77 },
                                { name: '보호대상아동', y: 1.97 },
                                { name: '가사서비스', y: 8.42 }
                                ]
                            }]
                            });

                            // 막대그래프
                            Highcharts.chart('bar', {
                            chart: {
                                type: 'column',
                                backgroundColor: 'transparent'
                            },
                            title: {
                                text: '사업별 예산 및 집행액',
                                style: { color: 'white' }
                            },
                            xAxis: {
                                categories: [
                                '청년실험',
                                '아이돌봄비',
                                '돌봄 운영비',
                                '돌봄 인건비',
                                '보호대상아동',
                                '가사서비스'
                                ],
                                labels: { style: { color: 'white' } }
                            },
                            yAxis: {
                                title: { text: '금액 (억)', style: { color: 'white' } },
                                labels: { style: { color: 'white' } }
                            },
                            legend: {
                                itemStyle: { color: 'white' }
                            },
                            series: [{
                                name: '예산액',
                                data: [1.7, 5.9, 7.9, 19.4, 0.8, 3.5],
                                color: '#66ccff'
                            }, {
                                name: '집행액',
                                data: [0.13, 0.9, 2.0, 5.4, 0.04, 0.09],
                                color: '#ff6699'
                            }]
                            });
                        </script>
                    </div>
                </div>
            </div>
            <div class="a_colum a_right ac1">
                <div class="type_list news">
                    <div class="title sb">
                        <p class="tit"></p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp05">더보기</a>
                    </div>
                    <div class="data_area">
                        <!-- sample data : tab/table -->
<div class="db-table">
  <div class="table-wrap">
    <div class="table-header">
      <div class="tabs">
        <button data-type="임신">임신</button>
        <button data-type="출산">출산</button>
        <button data-type="영유아">영유아</button>
        <button data-type="아동">아동</button>
        <button data-type="청소년">청소년</button>
        <button class="active" data-type="중장년">중장년</button>
        <button data-type="청년">청년</button>
        <button data-type="노년">노년</button>
        <button data-type="기타">기타</button>
      </div>
    </div>

    <table>
      <thead>
        <tr>
          <th>No</th>
          <th>정책명</th>
          <th>주관</th>
          <th>링크</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>
</div>

<script>
const tableData = {
  
  임신: [
    { no: 1, title: "고위험 임산부 의료비 지원", agency: "보건복지부", link: "보건복지부" },
    { no: 2, title: "난임 부부 시술비 지원", agency: "보건복지부", link: "정부24" }
  ],
  출산: [
    { no: 1, title: "첫만남 이용권", agency: "보건복지부", link: "정부24" },
    { no: 2, title: "산후조리원 바우처 지원", agency: "서울특별시", link: "서울맘케어" }
  ],
  영유아: [
    { no: 1, title: "영유아 건강검진", agency: "국민건강보험", link: "건강iN" },
    { no: 2, title: "아동수당", agency: "보건복지부", link: "정부24" }
  ],
  아동: [
    { no: 1, title: "초등 돌봄교실", agency: "교육부", link: "에듀팟" },
    { no: 2, title: "온종일 돌봄체계", agency: "보건복지부", link: "정부24" }
  ],
  청소년: [
    { no: 1, title: "청소년 특별지원", agency: "여성가족부", link: "청소년상담복지센터" },
    { no: 2, title: "학교 밖 청소년 지원", agency: "여성가족부", link: "꿈드림" }
  ],
  청년: [
    { no: 1, title: "청년 월세 지원", agency: "서울특별시", link: "서울주거포털" },
    { no: 2, title: "청년 창업 지원", agency: "중소벤처기업부", link: "K-Startup" }
  ],
  중장년: [
    { no: 1, title: "중장년 재취업 지원 서비스", agency: "고용노동부", link: "중장년일자리희망센터" },
    { no: 2, title: "서울시 중장년 1인 가구 지원", agency: "서울특별시", link: "서울시 복지포털" },
    { no: 3, title: "중장년 생애설계 서비스", agency: "고용노동부", link: "중장년내일센터" },
    { no: 4, title: "중장년 창업지원 패키지", agency: "중소벤처기업부", link: "K-Startup" },
    { no: 5, title: "중장년 전직·전문교육 과정", agency: "고용노동부", link: "직업능력개발원" },
    { no: 6, title: "서울시 4050 맞춤형 일자리", agency: "서울특별시", link: "서울일자리포털" },
    { no: 7, title: "중장년 심리·정서 상담 지원", agency: "보건복지부", link: "복지로" },
    { no: 8, title: "중장년 금융·신용 회복 지원", agency: "금융위원회", link: "서민금융진흥원" }
  ],
  노년: [
    { no: 1, title: "기초연금 제도", agency: "보건복지부", link: "기초연금" },
    { no: 2, title: "노인 일자리 지원", agency: "보건복지부", link: "노인일자리포털" }
  ],
  기타: [
    { no: 1, title: "다문화가정 지원", agency: "여성가족부", link: "다누리포털" },
    { no: 2, title: "장애인 고용 지원", agency: "고용노동부", link: "장애인고용공단" }
  ]
};

const tbody = document.getElementById('tableBody');
const tabs = document.querySelectorAll('.tabs button');

function renderTable(type) {
  tbody.innerHTML = '';
  const data = tableData[type] || [];
  data.forEach(row => {
    tbody.innerHTML += `
      <tr>
        <td>${row.no}</td>
        <td>${row.title}</td>
        <td>${row.agency}</td>
        <td><a href="#">${row.link}</a></td>
      </tr>
    `;
  });
}

// 기본: 중장년 탭 노출
renderTable('중장년');

tabs.forEach(btn => {
  btn.addEventListener('click', () => {
    tabs.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    renderTable(btn.dataset.type);
  });
});
</script>

<!-- //sample data : tab/table -->

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- //type A -->
</section>
<!-- layer popup -->
<div id="layerPopup" class="popup_wrap">
  <div class="popup_inner">
    <button class="popup_close" onclick="closePopup()">
        <svg width="24" height="24" viewBox="0 0 24 24">
            <line x1="4" y1="4" x2="20" y2="20" stroke="black" stroke-width="2"/>
            <line x1="20" y1="4" x2="4" y2="20" stroke="black" stroke-width="2"/>
        </svg>
    </button>
    <div id="popupContent"></div>
  </div>
</div>
<!-- //layer popup -->

</body>
<script>
    // popup
    const popupData = {
        lp01: "<img src='../src/assets/images/sample/sample_10_img01.png'>",
        lp02: "<img src='../src/assets/images/sample/sample_10_img02.png'>",
        lp03: "<img src='../src/assets/images/sample/sample_10_img03.png'>",
        lp04: "<img src='../src/assets/images/sample/sample_10_img04.png'>",
        lp05: "<img src='../src/assets/images/sample/sample_10_img05.png'>",
    }
    function showPopup(el) {
        const id = el.dataset.id; 
        document.getElementById('popupContent').innerHTML = popupData[id] || "<p>데이터 없음</p>";
        document.getElementById('layerPopup').style.display = 'block';
    }
    function closePopup() {
        document.getElementById('layerPopup').style.display = 'none';
    }
</script>
</html>