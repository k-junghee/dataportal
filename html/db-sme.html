<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Portal</title>
    <link rel="stylesheet" href="../src/css/reset.css">
    <link rel="stylesheet" href="../src/css/common.css">
    <link rel="stylesheet" href="../src/css/typeA.css">
    <script src="../src/js/common.js" defer></script>
    <script src="../src/js/typeA.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script> <!-- sample data -->
    <script src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"></script> <!-- sample data -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts-wordcloud@2/dist/echarts-wordcloud.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script> <!-- sample data -->
    <script src="https://code.highcharts.com/highcharts-3d.js"></script> <!-- sample data -->
</head>
<body>
<!-- header -->
<div id="header"></div>
<script>
    setTimeout(() => {
        document.getElementById('social-link').classList.add('active'); /* 사회안전망현황 active */
    }, 500);
</script>
<!-- //header -->
<section>
    <h1 class="blind">서울특별시 소상공인현황</h1>
    <!-- type A -->
    <div class="type_a_wrap layout">
        <div class="type_a_gird">
            <div class="a_colum a_left w2">
                <div class="a_colum wc_2">
                    <div class="type_list list_keyword">
                        <div class="title sb">
                            <p class="tit">소상공인 업종별 현황</p>
                            <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp01">더보기</a>
                        </div>
                        <div class="data_area keyword_data">
                            <!-- sample data : highcharts.js -->
                            <div id="container"></div>
                            <script>
                            Highcharts.chart('container', {
                                chart: {
                                    type: 'pie',
                                    backgroundColor: 'transparent',
                                    options3d: {
                                        enabled: true,
                                        alpha: 45,
                                        beta: 0
                                    },
                                    height: 350
                                },
                                title: null,
                                subtitle: null,
                                plotOptions: {
                                    pie: {
                                        innerSize: 100,   // 도넛 두께
                                        depth: 45,        // 원통 높이
                                        //startAngle: -90,  // 시작 각도 (위쪽 반 잘라냄)
                                        //endAngle: 90,     // 끝 각도
                                        //center: ['50%', '75%'] // 아래쪽으로 내림
                                    }
                                },
                                series: [{
                                    data: [
                                        ['기타', 12],
                                        ['소매', 19],
                                        ['음식', 14],
                                        ['생활서비스', 18],
                                        ['숙박업', 22],
                                        ['부동산', 15]
                                    ]
                                }]
                            });
                            </script>
                            <!-- //sample data : highcharts.js -->
                        </div>
                    </div>
                    <div class="type_list list_map">
                        <div class="title">
                            <p class="tit">종합 map</p>
                            <div class="info_box">
                                <span class="info_icon"></span>
                                <p class="info_tag">각 지역을 클릭하시면, 해당 지역의 데이터를 확인하실 수 있습니다.</p>
                            </div>
                        </div>
                        <div class="data_area map_data">
                            <!-- smaple data : img -->
                            <img src="../src/assets/images/map01.png" alt="map" style="display: block;width: 100%; height: 100%;"/>
                            <!-- //smaple data : img -->
                        </div>
                    </div>
                    
                </div>
                <div class="a_colum wc_1">
                    <div class="type_list list_board">
                        <!-- <div class="title sb">
                            <p class="tit"></p>
                            <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp02">더보기</a>
                        </div> -->
                        <div class="data_area">
                            <img src='../src/assets/images/sample/sample_16_img02.png' style="width: 100%">
                        </div>
                    </div>
                    <!-- <div class="type_list list_stats">
                        <div class="title sb">
                            <p class="tit"></p>
                            <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp03">더보기</a>
                        </div>
                        <div class="data_area">

                        </div>
                    </div> -->
                </div>
            </div>
            <div class="a_colum a_right ac2">
                <div class="type_list news ac_2h">
                    <div class="title sb">
                        <p class="tit">지역별 소상공인 비중</p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp03">더보기</a>
                    </div>
                    <div class="data_area video_data">
                        <!-- sample data : echarts.js -->
                        <div id="sankeyChart"></div>
                        <script>
                        var chart = echarts.init(document.getElementById('sankeyChart'));

                        chart.setOption({
                            tooltip: { trigger: 'item', triggerOn: 'mousemove' },
                            series: {
                            type: 'sankey',
                            layout: 'none',
                            emphasis: { focus: 'adjacency' },
                            lineStyle: { color: 'gradient', curveness: 0.5 },
                            data: [
                                { name: '강남구' }, { name: '은평구' }, { name: '송파구' },
                                { name: '사회복지' }, { name: '환경' }, { name: '교육' }, { name: '산업·중소기업' }
                            ],
                            links: [
                                { source: '강남구', target: '사회복지', value: 20 },
                                { source: '강남구', target: '환경', value: 5 },
                                { source: '은평구', target: '사회복지', value: 13 },
                                { source: '은평구', target: '교육', value: 3 },
                                { source: '송파구', target: '산업·중소기업', value: 7 },
                                { source: '송파구', target: '사회복지', value: 10 }
                            ]
                            }
                        });

                        // 반응형 resize
                        window.addEventListener('resize', function() {
                            chart.resize();
                        });
                        </script>
                    <!-- //sample data : echarts.js -->
                    </div>
                </div>
                <div class="type_list left">
                    <div class="title sb">
                        <p class="tit"></p>
                        <a href="javascript:;" onclick="showPopup(this);" class="more_btn" data-id="lp04">더보기</a>
                    </div>
                    <div class="box_cont">
                        <!-- sample data : echarts.js -->
                         <div id="barLineChart" style="width:100%;height:250px;"></div>
                        <script>
                        var chart2 = echarts.init(document.getElementById('barLineChart'));

                        chart2.setOption({
                        title: { text: '재정 자립도', left:'center', textStyle:{color: 'var(--ft-cl-gray)' } },
                        tooltip: { trigger: 'axis' },
                        xAxis: { type: 'category', data: ['2016','2017','2018','2019','2020','2021','2022','2023','2024','2025'], 
                                // axisLabel:{color: 'var(--ft-cl-gray)' },
                                style: { color: 'var(--ft-cl-gray)' },
                                    labels: { style: { color: 'var(--ft-cl-gray)' } }, 
                                    lineColor: 'var(--ft-cl-gray)',
                                    tickColor: 'var(--ft-cl-gray)'  },
                        yAxis: { type: 'value', 
                                // axisLabel:{color: 'var(--ft-cl-gray)' } ,
                                style: { color: 'var(--ft-cl-gray)' },
                                        labels: { style: { color: 'var(--ft-cl-gray)' } }, 
                                        lineColor: 'var(--ft-cl-gray)',
                                        tickColor: 'var(--ft-cl-gray)' },
                        series: [
                            {
                            name: '자립도',
                            type: 'bar',
                            data: [22.1, 24.0, 23.8, 22.6, 21.2, 22.0, 23.3, 24.8, 21.9, 20.3],
                            itemStyle: { color:'#40a9ff' }
                            },
                            {
                            name: '추세',
                            type: 'line',
                            data: [22.1, 24.0, 23.8, 22.6, 21.2, 22.0, 23.3, 24.8, 21.9, 20.3],
                            itemStyle: { color:'#ffa940' }
                            }
                        ]
                        });
                        </script>
                        <!-- //sample data : echarts.js -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- //type A -->
</section>
<!-- layer popup -->
<div id="layerPopup" class="popup_wrap">
  <div class="popup_inner">
    <button class="popup_close" onclick="closePopup()">
        <svg width="24" height="24" viewBox="0 0 24 24">
            <line x1="4" y1="4" x2="20" y2="20" stroke="black" stroke-width="2"/>
            <line x1="20" y1="4" x2="4" y2="20" stroke="black" stroke-width="2"/>
        </svg>
    </button>
    <div id="popupContent"></div>
  </div>
</div>
<!-- //layer popup -->

</body>
<script>
    // popup
    const popupData = {
        lp01: "<img src='../src/assets/images/sample/sample_16_img01.png'>",
        lp02: "<img src='../src/assets/images/sample/sample_16_img02.png'>",
        lp03: "<img src='../src/assets/images/sample/sample_16_img03.png'>",
        lp04: "<img src='../src/assets/images/sample/sample_16_img04.png'>",
    }
    function showPopup(el) {
        const id = el.dataset.id; 
        document.getElementById('popupContent').innerHTML = popupData[id] || "<p>데이터 없음</p>";
        document.getElementById('layerPopup').style.display = 'block';
    }
    function closePopup() {
        document.getElementById('layerPopup').style.display = 'none';
    }
</script>
</html>